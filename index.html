<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>A11Y Filter Table</title>
    <style>
    	#content { width:960px; margin:auto; } 
    	table, th, td { border-collapse: collapse; border:2px solid #000; padding:5px; text-align:left; vertical-align:top; } 
 	  	button {  border:2px solid #000; border-radius:10px; padding:10px; font-size:1rem; margin-bottom:10px; display:inline-block; margin-right:10px; } 

        #sortButtonsHtmlStringContainer {}  
		.offscreenText {
			position: absolute;
			clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
			clip: rect(1px, 1px, 1px, 1px);
			clip-path: inset(50%);
			padding: 0;
			border: 0;
			height: 1px; 
			width: 1px; 
			overflow: hidden;
			white-space: nowrap;
		}
		.sortArrow { font-size:2rem; font-weight:bold; } 


    </style>
  </head>
  <body>

    <section id="content">
		<h1>A11Y Grid</h1> 
		<h2>Sort Buttons</h2>
		<div id="sortButtonsHtmlStringContainer"></div>
		<h2>Refresh Button</h2>
		<button id="refreshTableButton">Refresh Table</button>
		<h2>Data Table</h2>
		<section id="tableContainer"></section>
    </section>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script>
    
    	function createTable(){
			let url = './getTableJSON.php';
			let tableHtmlString;
			let jsonObjectsArray = [];
			let	sortButtonsHtmlString = ''; 
			$.ajax({
			  type: 'GET',
			  url: url,
			  dataType: 'json',
			  success: function(data) { jsonObjectsArray = data;},
			  async: false
			});
           
			for (let key in jsonObjectsArray[0]) {

				sortButtonsHtmlString += '<form action="./sortTableJSON.php" method="post">';
				sortButtonsHtmlString += '<button name="label' + 'value="key"'  + '_ascending_button' + '>';
				sortButtonsHtmlString += key; 
				sortButtonsHtmlString += '<span class="sortArrow">'; 
				sortButtonsHtmlString += '&uarr;'; 
				sortButtonsHtmlString += '</span>'; 
				sortButtonsHtmlString += '<span class="offscreenText">'; 
				sortButtonsHtmlString += 'sort ascending '; 
				sortButtonsHtmlString += '</span>'; 
				sortButtonsHtmlString += '</button>';
				sortButtonsHtmlString += '<button name= ' + key + '_descending_button' + '>';
                sortButtonsHtmlString += key; 
				sortButtonsHtmlString += '<span class="sortArrow">'; 
				sortButtonsHtmlString += '&darr;'; 
				sortButtonsHtmlString += '</span>'; 
				sortButtonsHtmlString += '<span class="offscreenText">'; 
				sortButtonsHtmlString += 'sort descending '; 
				sortButtonsHtmlString += '</span>'; 
				sortButtonsHtmlString += '</button>';
				sortButtonsHtmlString += '</form>';
			}
			$('#sortButtonsHtmlStringContainer').html(sortButtonsHtmlString);

            tableHtmlString = '<table>';
			tableHtmlString += '<tr>';
			for (let key in jsonObjectsArray[0]) {
				tableHtmlString += '<th>';
				tableHtmlString += key; 
				tableHtmlString += '</th>';
			}
			tableHtmlString += '</tr>';

			for(let i = 0; i < jsonObjectsArray.length; i++) {
				tableHtmlString += '<tr>';		
				for (let key in jsonObjectsArray[i]) {
					tableHtmlString += '<td>';		
					tableHtmlString += jsonObjectsArray[i][key];		
					tableHtmlString += '</td>';		
				}		
				tableHtmlString += '</tr>';		
			}

			tableHtmlString += "</table>";

			$('#tableContainer').html(tableHtmlString);

		}
		
		createTable();  

		$('#refreshTableButton').click(function(){ createTable();}); 

	</script>

  </body>
</html>

